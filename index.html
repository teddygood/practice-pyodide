<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Pyodide Numpy Calculator</title>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.0/full/pyodide.js"></script>
</head>
<body>
    <h1>Numpy Calculator</h1>
    <p>Enter two numbers and choose an operation.</p>
    <input type="number" id="num1" value="1"> 
    <select id="op">
        <option value="add">+</option>
        <option value="sub">-</option>
        <option value="mul">*</option>
        <option value="div">/</option>
    </select>
    <input type="number" id="num2" value="2">
    <button id="calc" disabled>Calculate</button>
    <pre id="output"></pre>
    <script type="text/javascript">
        let pyodideReadyPromise = loadPyodide();
        async function calculate() {
            let pyodide = await pyodideReadyPromise;
            const num1 = parseFloat(document.getElementById('num1').value);
            const num2 = parseFloat(document.getElementById('num2').value);
            const op = document.getElementById('op').value;
            const code = `
import numpy as np
ops = {'add': np.add, 'sub': np.subtract, 'mul': np.multiply, 'div': np.divide}
result = ops['${op}'](${num1}, ${num2})
result
`;
            let result = await pyodide.runPythonAsync(code);
            document.getElementById('output').textContent = result;
        }
        pyodideReadyPromise.then(() => {
            document.getElementById('calc').disabled = false;
        });
        document.getElementById('calc').addEventListener('click', calculate);
    </script>
</body>
</html>
